import steps from '../steps';

export const normalizeChapterId = (chapterId) => {
  if (typeof chapterId === 'number') return chapterId;

  if (typeof chapterId === 'string') {
    if (chapterId.startsWith('chapter')) {
      return parseInt(chapterId.replace('chapter', ''), 10);
    }
    return parseInt(chapterId, 10);
  }

  return null;
};

const infoContentData = {
  1: {
    "title": "Лето 1916-го: рубеж надежд",
    "content": [
      {
        "type": "paragraph",
        "text": "Июнь 1916-го. Восточный фронт застыл: сотни километров траншей, нехватка снарядов, измученные солдаты. Ставка готовит удар, который должен сломить Центральные державы и снять давление на союзников под Соммой."
      },
      {
        "type": "paragraph",
        "text": "Замысел генерала Алексея Брусилова — парализовать Австро-Венгрию и вернуть русской армии инициативу. В первые тридцать секунд фильма зритель слышит гул фронта, а затем карта Европы подсвечивает будущий театр боя в Галиции."
      },
      {
        "type": "list",
        "items": [
          "Русские: 125 дивизий",
          "Австро-Венгрия: 40 дивизий",
          "Потери к маю: ≈3 млн",
          "Цель — отвлечь Германию"
        ]
      }
    ]
  },
  2: {
    "title": "Причины и предпосылки наступления",
    "content": [
      {
        "type": "paragraph",
        "text": "Декабрь 1915-го. На конференции в Шантийи Антанта решает: летом 1916-го все фронты ударят одновременно. Британия и Франция — на Сомме, Россия — ради диверсии. Главный удар ждут от Северного фронта, Юго-Западный должен лишь держать оборону."
      },
      {
        "type": "paragraph",
        "text": "Май 1916-го. Австро-Венгры бьют Италию в Трентино; союзники срочно просят Россию наступать. Ставка переносит операцию на июнь. Брусилов убеждает: его фронт не ограничится демонстрацией, а атакует всей мощью."
      },
      {
        "type": "list",
        "items": [
          "Шантийи: план общей атаки",
          "Трентино: кризис Италии",
          "23 мая: приказ ускорить",
          "ЮЗФ: полный удар Брусилова"
        ]
      }
    ]
  },
  3: {
    "title": "Как ломали фронт",
    "content": [
      {
        "type": "paragraph",
        "text": "Брусилов отказался от «тарана»: фронт рвут сразу в шести точках 350-километровой дуги, чтобы парализовать резервы врага."
      },
      {
        "type": "paragraph",
        "text": "К 16 мая у ЮЗФ 55 дивизий (≈ 589 тыс., 1 924 орудия) против 49 австро-германских (≈ 450 тыс., 1 350 стволов)."
      },
      {
        "type": "list",
        "items": [
          "«Ласточкины хвосты»: пехота ночью сокращает нейтралку до 60 м",
          "90 % батарей — подавление, 10 % гаубиц — огонь «по вызову»",
          "Шесть одновременных прорывов вместо одного «бетонолома»"
        ]
      },
      {
        "type": "paragraph",
        "text": "Идея: не ширина бреши, а множественность «укусов» разрушит оборону быстрее."
      }
    ]
  },
  4: {
    "title": "Техника прорыва",
    "content": [
      {
        "type": "paragraph",
        "text": "Подготовка к наступлению весной 1916 года стала инженерным экспериментом: русские войска сближали позиции с противником буквально ночью, вручную, и пристреливали артиллерию так, чтобы сокрушить передовые рубежи за минуты."
      },
      {
        "type": "list",
        "items": [
          "«Ласточкины хвосты»: полевые галереи для скрытого выдвижения пехоты",
          "Огонь «по вызову» от передовых цепей — редкость для 1916 года",
          "Фугасы с механическими трубками — разрывы в воздухе для максимального урона",
          "Подрыв бетонных блокгаузов зарядами тола — впервые в русской армии"
        ]
      },
      {
        "type": "paragraph",
        "text": "Брусилов создал методику, где артиллерия и пехота действовали в связке — без этого атака по всей линии была бы невозможна."
      }
    ]
  },
  5: {
    title: "Ковель и немецкий мост",
    content: [
      {
        type: "paragraph",
        text: "На пятый день наступления Брусилова стало ясно: фронт противника рассыпается, но — не полностью. Ковель, ключевой железнодорожный узел, оставался под контролем Центральных держав. Германия, увидев угрозу обрушения Восточного фронта, запустила срочную операцию переброски дивизий."
      },
      {
        type: "paragraph",
        text: "Так называемый «железнодорожный мост» соединил Верден и Брест-Литовск: первые немецкие эшелоны покинули Западный фронт 12 июня, а уже 15-го выгружались в тыл Юго-Западного фронта. Впервые в этой войне резервы прошли 1 500 км за 76 часов."
      },
      {
        type: "list",
        items: [
          "Переброшено: 11 пехотных и 2 кавалерийские дивизии из-под Вердена",
          "5 дивизий сняты с Соммы, 2 — с Итальянского фронта",
          "Общая численность: ≈ 275 000 человек и 1 100 орудий",
          "Интервал эшелонов: 18 минут между составами"
        ]
      },
      {
        type: "paragraph",
        text: "Под Ковелем начали формироваться свежие немецкие соединения. В донесениях появляется термин Kowel-Lücke — «ковельская дыра». Пока она зияла, под угрозой оставалась главная магистраль от Берлина до Вены."
      },
      {
        type: "paragraph",
        text: "Русская армия дважды пыталась взять Ковель штурмом: 16 (29) июня и 3 июля, но обе атаки захлебнулись. Немцы, ценой больших потерь, сумели остановить продвижение. Темп прорыва упал с 25 км в сутки до 4–5 км. Наступление впервые застопорилось."
      }
    ]
  },
  6: {
    title: "Стоход: болото, где умер манёвр",
    content: [
      {
        type: "paragraph",
        text: "К середине июля 1916 года наступление Брусилова окончательно увязло — буквально. Русские части вышли к пойме реки Стоход: ширина — не более 8 метров, но берега представляли собой сплошную топь. Единственные переправы строились из консервных банок и досок от ящиков с боеприпасами."
      },
      {
        type: "paragraph",
        text: "Правый берег немцы превратили в неприступную линию: каждая роща превращалась в укреплённый узел, пулемёты стояли каждые 60 метров, подступы расчищались до зеркальной воды. Всё, что можно было оборонять, оборонялось — и фронт застыл."
      },
      {
        type: "list",
        items: [
          "Средняя глубина стоячей воды в передних окопах — 45 см",
          "До 70 % бойцов стояли в резиновых «бурлуках» сутками",
          "3 210 случаев болотного тифа и флегмон стоп за неделю",
          "В июле от обморожений ног пострадало больше, чем от пуль"
        ]
      },
      {
        type: "paragraph",
        text: "К 18 июля у 8-й армии осталось по 0,9 заряда на ствол тяжёлой артиллерии. Немцы, напротив, имели 2,4 — в 2,5 раза больше. В таких условиях поддерживать темп «ползущего огня» стало невозможным: пехота теряла ритм, атаки превращались в хаотичные локальные схватки за сухую землю."
      },
      {
        type: "paragraph",
        text: "На этом этапе исчезает сама идея манёвра. Фронт снова принимает позиционный характер — как в 1915 году. На востоке, как и на западе, победа теперь измеряется не в километрах, а в часах удержания плацдарма."
      }
    ]
  },
  7: {
    title: "Новая линия и потерянная инициатива",
    content: [
      {
        type: "paragraph",
        text: "К сентябрю 1916 года фронт окончательно стабилизировался. Русские войска продвинулись местами до 150 км, заняли значительную часть Волыни, всю Буковину и Восточную Галицию. Но Ковель остался в руках противника — важнейшая цель кампании не была достигнута."
      },
      {
        type: "paragraph",
        text: "На дуге Стохода началось выравнивание фронта: немцы перебросили новые дивизии, позиции усилились, а логистика русского наступления выдохлась. Соотношение сил изменилось: 54 русские дивизии против 62 австро-германских, в артиллерии — 2 750 против 3 100 стволов. Инициатива перешла к обороняющейся стороне."
      },
      {
        type: "list",
        items: [
          "Фронт стабилизировался к 20 сентября 1916 г.",
          "Ковель остался непокорённым",
          "Русские части вышли к Теребовле, Бучачу и Черновицам",
          "Потенциал нового рывка был утрачен"
        ]
      },
      {
        type: "paragraph",
        text: "В тот же период Румыния, вдохновлённая успехом прорыва, вступила в войну на стороне Антанты. Но Россия, истощённая, уже не могла поддержать её масштабным наступлением. Брусилов докладывал: «Мы заняли пространство, но не имеем людей и времени для нового рывка»."
      },
      {
        type: "paragraph",
        text: "Операция, начавшаяся как триумф, закончилась возвращением к позиционной войне. Так завершился один из самых блестящих, но ограниченных по последствиям эпизодов Первой мировой."
      }
    ]
  }


};

const mapContentData = {
  7: {
    title: "Карта глава 1: Начальные события",
    description: "Интерактивная карта основных локаций, связанных с начальными событиями",
    mapImage: "/assets/media/mapchhz.png",
    points: [
      {
        id: 1,
        x: 30,
        y: 25,
        title: "Точка отсчета",
        description: "Место, где начались основные исторические события этой главы."
      },
      {
        id: 2,
        x: 70,
        y: 40,
        title: "Первое поселение",
        description: "Здесь были заложены основы будущих исторических процессов."
      },
      {
        id: 3,
        x: 45,
        y: 65,
        title: "Культурный центр",
        description: "Важное место для понимания культурного контекста событий."
      }
    ]
  },
  2: {
    title: "Карта глава 2: Ключевые территории",
    description: "Карта важных территорий, на которых развернулись события главы 2",
    mapImage: "/assets/media/map_ch3.jpg",
    points: [
      {
        id: 1,
        x: 20,
        y: 35,
        title: "Территория конфликта",
        description: "Место противостояния основных сил описываемого периода."
      },
      {
        id: 2,
        x: 60,
        y: 30,
        title: "Центр развития",
        description: "Здесь были сосредоточены основные ресурсы и инфраструктура."
      },
      {
        id: 3,
        x: 50,
        y: 75,
        title: "Пограничная зона",
        description: "Стратегически важная область, определившая дальнейшее развитие."
      }
    ]
  },
  3: {
    title: "Карта глава 3: Ключевые локации",
    description: "Карта переломных исторических мест третьей главы",
    mapImage: "/assets/media/map_ch3.jpg",
    points: [
      {
        id: 1,
        x: 25,
        y: 30,
        title: "Локация 1",
        description: "Важная историческая локация, где происходили ключевые события."
      },
      {
        id: 2,
        x: 65,
        y: 45,
        title: "Локация 2",
        description: "Стратегический пункт с богатой историей и значимыми артефактами."
      },
      {
        id: 3,
        x: 40,
        y: 70,
        title: "Локация 3",
        description: "Место знаменитого сражения, определившего ход истории."
      }
    ]
  },
  4: {
    title: "Карта глава 4: География последствий",
    description: "Карта территорий, на которых проявились последствия предыдущих событий",
    mapImage: "/assets/media/map_ch3.jpg",
    points: [
      {
        id: 1,
        x: 35,
        y: 40,
        title: "Зона влияния",
        description: "Территория, наиболее затронутая последствиями предшествующих событий."
      },
      {
        id: 2,
        x: 55,
        y: 25,
        title: "Новый центр",
        description: "Место формирования новых структур и отношений."
      },
      {
        id: 3,
        x: 30,
        y: 60,
        title: "Трансформированная область",
        description: "Регион, претерпевший наибольшие изменения в результате событий."
      }
    ]
  },
  5: {
    title: "Карта глава 5: Современный контекст",
    description: "Карта современного состояния исторически важных территорий",
    mapImage: "/assets/media/map_ch3.jpg",
    points: [
      {
        id: 1,
        x: 45,
        y: 30,
        title: "Современный мемориал",
        description: "Место памяти об исторических событиях, имеющее значение в наши дни."
      },
      {
        id: 2,
        x: 25,
        y: 55,
        title: "Культурный центр",
        description: "Современный культурный центр, сохраняющий историческое наследие."
      },
      {
        id: 3,
        x: 70,
        y: 50,
        title: "Музейный комплекс",
        description: "Место сохранения и изучения артефактов описываемого периода."
      }
    ]
  }
};

export const hasInfoContent = (chapterId) => {
  const numericId = normalizeChapterId(chapterId);
  const chapter = steps.find(step =>
    step.id === `chapter${numericId}` ||
    normalizeChapterId(step.id) === numericId
  );

  return chapter?.infoContent?.hasInfo || false;
};

export const hasMapContent = (chapterId) => {
  const numericId = normalizeChapterId(chapterId);
  const chapter = steps.find(step =>
    step.id === `chapter${numericId}` ||
    normalizeChapterId(step.id) === numericId
  );

  return chapter?.infoContent?.hasMap || false;
};

export const getInfoContent = (chapterId) => {
  const numericId = normalizeChapterId(chapterId);

  if (!numericId || numericId < 1 || numericId > Object.keys(infoContentData).length) {
    return null;
  }

  return infoContentData[numericId] || null;
};

export const getMapContent = (chapterId) => {
  const numericId = normalizeChapterId(chapterId);

  if (!numericId || numericId < 1 || numericId > Object.keys(mapContentData).length) {
    return null;
  }

    return mapContentData[numericId] || null;
};
